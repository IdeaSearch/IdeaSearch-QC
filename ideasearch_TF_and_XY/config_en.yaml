# IdeaSearch Configuration for TF_and_XY Quantum Circuit Optimization
# English Version

# ============================================================================
# PROJECT INFORMATION
# ============================================================================
project:
  name: "TF_and_XY_QuantumCircuit"
  description: |
    This project uses the IdeaSearch framework to automatically search and optimize 
    quantum circuit ansatz for simulating the ground state of Ising models. By combining 
    evolutionary algorithms with large language models, the system can automatically 
    generate, evaluate, and optimize quantum circuit designs.
  version: "1.0.0"
  author: "Sonny"

# ============================================================================
# MODEL SELECTION
# ============================================================================
model:
  # Select which Hamiltonian model to use: 'TF' or 'XY'
  type: "XY"  # Options: 'TF' (Transverse Field Ising), 'XY' (XY Model)
  
  description:
    TF: "Transverse Field Ising Model: H = -J * Σ Z_i Z_{i+1} - h * Σ X_i"
    XY: "XY Model: H = -J * Σ (X_i X_{i+1} + Y_i Y_{i+1}) - h * Σ Z_i"

# ============================================================================
# PATHS CONFIGURATION
# ============================================================================
paths:
  # API keys configuration file
  api_keys: "./api_keys.json" # Config your API keys here
  
  # Database directory (will be created automatically with model type suffix)
  database: "./database"
  
  # User code directory
  user_code: "./user_code"

# ============================================================================
# LANGUAGE SETTINGS
# ============================================================================
language:
  # Language for IdeaSearch interface
  interface: "en_US"  # Options: "zh_CN", "en_US"

# ============================================================================
# LLM CONFIGURATION
# ============================================================================
llm:
  # List of models to use for idea generation
  models:
    # - "gpt5-nano"
    - "DeepSeek-R1-Distill-Qwen-32B"
  
  # Temperature for each model (controls randomness)
  temperatures:
    - 0.9
  
  # Number of examples to include in prompt (SHOT_NUM)
  examples_num: 3
  
  # Temperature for sampling examples from database (INIT_TEMP)
  sample_temperature: 10.0

# ============================================================================
# SEARCH PARAMETERS
# ============================================================================
search:
  # Number of islands for parallel search (NUM_ISLANDS)
  island_num: 10
  
  # Number of migration cycles
  cycle_num: 3
  
  # Number of evolution rounds per cycle
  unit_interaction_num: 10
  
  # Number of parallel samplers per island
  samplers_num: 3
  
  # Number of parallel evaluators per island
  evaluators_num: 3
  
  # Number of ideas to generate per round (MAX_ATTEMPTS)
  generate_num: 3

# ============================================================================
# SCORING PARAMETERS
# ============================================================================
scoring:
  # Minimum score to accept new ideas
  hand_over_threshold: 0.0
  
  # Valid score range (min, max)
  score_range:
    min: 0.0
    max: 200.0
  
  # Scoring formula:
  # raw_score = -10 * energy
  # length_penalty = min(2 * (code_length // 40) / 10, 2)
  # final_score = max(raw_score - length_penalty, 0.0)
  
  description: |
    Scoring Mechanism:
    - Raw score: VQE computed energy × (-10)
    - Length penalty: min(2 × (code_length // 40) / 10, 2)
    - Final score: max(raw_score - length_penalty, 0.0)
    - Parameter limit: Score is 0.0 if parameter count > 9

# ============================================================================
# EVALUATION PARAMETERS
# ============================================================================
evaluation:
  # Quantum system parameters
  quantum:
    # Number of qubits
    num_qubits: 9
    
    # Coupling strength
    J: 1.0
    
    # Field strength
    h: 1.0
    
    # Periodic boundary condition (0: open, 1: periodic)
    PBC: 0
    
    # Maximum number of parameters allowed
    max_parameters: 9
  
  # VQE optimizer settings
  optimizer:
    name: "COBYLA"
    maxiter: 3000
    rhobeg: 300
    tol: 1.0e-15
  
  # Timeout for evaluation (seconds)
  timeout: 240.0

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
logging:
  # Record prompts in diary log
  record_prompt_in_diary: true
  
  # Log file locations (relative to database path)
  diary_file: "log/diary.txt"
  
  # Verbosity level
  verbose: true

# ============================================================================
# INITIAL IDEAS CONFIGURATION
# ============================================================================
initial_ideas:
  # Whether to use predefined initial ideas
  enabled: true
  
  # Number of initial templates
  count: 3
  
  description: |
    Three initial quantum circuit templates:
    1. Template 1: RX gates with linear parameter scaling
    2. Template 2: RY gates with grouped parameters
    3. Template 3: RZ gates with exponential parameters

# ============================================================================
# WORKFLOW
# ============================================================================
workflow:
  description: |
    Workflow:
    1. Initialization: Load three initial quantum circuit templates
    2. Sampling: Select high-quality ideas from islands as examples
    3. Generation: LLM generates new quantum circuit code based on examples
    4. Evaluation: Evaluate new circuit performance using VQE
    5. Update: Add high-scoring circuits to island population
    6. Migration: Periodically exchange excellent ideas between islands
    7. Iteration: Repeat the above process until specified cycles complete

# ============================================================================
# OUTPUT CONFIGURATION
# ============================================================================
output:
  # Database subdirectories (auto-created)
  directories:
    ideas: "ideas"          # Generated ideas
    data: "data"            # Score data
    pic: "pic"              # Visualization charts
    log: "log"              # Log files
  
  # Display settings
  display:
    show_best_per_cycle: true      # Show best result per cycle
    show_final_best: true          # Show final best result
    show_progress: true            # Show progress information

# ============================================================================
# PREREQUISITES
# ============================================================================
prerequisites:
  description: |
    Prerequisites:
    
    1. Install IdeaSearch:
       pip install IdeaSearch
    
    2. Install dependencies:
       pip install qiskit qiskit-aer qiskit-algorithms numpy scipy
    
    3. Configure API keys:
       - Ensure api_keys.json file exists and is properly configured
       - Include API configuration for at least one model

# ============================================================================
# USAGE
# ============================================================================
usage:
  description: |
    Usage:
    
    1. Modify configuration:
       Edit config_en.yaml file to set desired parameters
    
    2. Run search:
       cd ideasearch_TF_and_XY
       python run_en.py
    
    3. View results:
       - Real-time output: Terminal display
       - Database files: database_TF/ or database_XY/
       - Log files: database_*/log/diary.txt

# ============================================================================
# NOTES
# ============================================================================
notes:
  - |
    Evaluation Time: 
    Each evaluation may take considerable time (up to 240 seconds), please be patient
  
  - |
    Parameter Limit: 
    Generated circuit parameter count should be ≤ 9, otherwise rejected
  
  - |
    Code Format: 
    Generated code must include create_ansatz(n) function definition
  
  - |
    Dependency Management: 
    Ensure all necessary Python packages are properly installed
  
  - |
    Thread Safety:
    Evaluation function uses thread-safe timeout mechanism, suitable for multi-threaded environments

# ============================================================================
# EXTENSIONS
# ============================================================================
extensions:
  suggestions:
    - |
      Add More Models:
      Add other LLMs in llm.models
    
    - |
      Custom Evaluation:
      Modify evaluation.py to adapt to different physical systems
    
    - |
      Mutation and Crossover:
      Implement mutation_func and crossover_func to increase diversity
    
    - |
      System Assessment:
      Implement assess_func for global quality evaluation

# ============================================================================
# REFERENCES
# ============================================================================
references:
  - name: "IdeaSearch Documentation"
    url: "https://github.com/IdeaSearch/IdeaSearch"
  
  - name: "Qiskit Documentation"
    url: "https://qiskit.org/documentation/"
  
  - name: "VQE Algorithm"
    url: "https://qiskit.org/documentation/stubs/qiskit_algorithms.VQE.html"
  
  - name: "Transverse Field Ising Model"
    description: "H = -J * Σ Z_i Z_{i+1} - h * Σ X_i"
  
  - name: "XY Model"
    description: "H = -J * Σ (X_i X_{i+1} + Y_i Y_{i+1}) - h * Σ Z_i"
